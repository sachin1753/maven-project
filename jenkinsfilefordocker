node
{
  stage('SCM Checkout')
  {
    git 'https://github.com/sachin1753/maven-project'
  }
  stage('Checkout to different branch')
  {
    sh "git branch -r"
    sh "git checkout master"
  }
  stage('package stage')
  {
    sh label: '', script: 'mvn clean package'
  }
  stage('Build Image')
  {
    sh 'docker build -t sachin1753/mytomcat:1.0.0 .'
  }
  stage('Push Image on Docker')
  {
    withCredentials([usernameColonPassword(credentialsId: 'mydocker', variable: 'mydocker')]) {
      sh "docker login -u sachin1753 -p ${mydocker}"
    }
    
    sh 'docker push sachin1753/mytomcat:1.0.0'

  }
}
